<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>生日快乐</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
<style>
body { overflow: hidden; }
.main-celebrate { position: relative; width: min(780px, 92vw); text-align: center; }
.cake { position: relative; width: 220px; height: 180px; margin: 30px auto 10px; opacity: 0.28; }
.cake .tier { position: absolute; left: 50%; transform: translateX(-50%); background: rgba(255,255,255,0.75); border-radius: 10px; box-shadow: 0 6px 14px rgba(0,0,0,0.06) inset; }
.cake .tier.t1 { bottom: 0; width: 220px; height: 70px; }
.cake .tier.t2 { bottom: 50px; width: 160px; height: 55px; }
.cake .tier.t3 { bottom: 95px; width: 110px; height: 45px; }
.cake .candle { position: absolute; bottom: 140px; left: 50%; width: 10px; height: 26px; background: #ffd4aa; border-radius: 3px; transform: translateX(-50%); box-shadow: 0 0 0 2px rgba(0,0,0,0.03) inset; }
.cake .flame { position: absolute; bottom: 166px; left: 50%; width: 12px; height: 18px; background: radial-gradient(circle at 50% 60%, #ffd36e, #ff8b3d 70%, rgba(255,139,61,0.0) 71%); border-radius: 50% 50% 50% 50%; transform: translateX(-50%); animation: flicker 1.2s ease-in-out infinite; opacity: .9; }
@keyframes flicker { 0%,100%{ transform: translateX(-50%) scale(1);} 50%{ transform: translateX(-50%) scale(0.9);} }
.canvas-wrap { position: fixed; inset: 0; pointer-events: none; }
#fw { position: absolute; inset: 0; width: 100%; height: 100%; }
.title { margin: 10px 0 0; font-size: 36px; letter-spacing: 4px; opacity: 0; animation: fadeIn 2.2s ease forwards 0.6s; color: #c65f35; }
@keyframes fadeIn { to { opacity: 1; } }
</style>
</head>
<body>
<main class="container main-celebrate">
<div class="cake" aria-hidden="true">
<div class="tier t3"></div>
<div class="tier t2"></div>
<div class="tier t1"></div>
<div class="candle"></div>
<div class="flame"></div>
</div>
<h1 class="title">丽丽生日快乐</h1>
</main>
<div class="canvas-wrap"><canvas id="fw"></canvas></div>
<audio id="happy-audio" preload="auto" autoplay>
<source src="https://upload.wikimedia.org/wikipedia/commons/1/10/Happy_Birthday_to_You_%28Instrumental%29.ogg" type="audio/ogg">
<source src="https://upload.wikimedia.org/wikipedia/commons/transcoded/1/10/Happy_Birthday_to_You_%28Instrumental%29.ogg/Happy_Birthday_to_You_%28Instrumental%29.ogg.mp3" type="audio/mpeg">
</audio>
<script>
(function(){
const audio = document.getElementById('happy-audio');
if (audio) { audio.play().catch(()=>{}); }
const canvas = document.getElementById('fw');
const ctx = canvas.getContext('2d');
let W, H; const DPR = Math.min(window.devicePixelRatio||1, 2);
function resize(){ W = canvas.width = Math.floor(window.innerWidth * DPR); H = canvas.height = Math.floor(window.innerHeight * DPR); }
resize(); window.addEventListener('resize', resize);
const particles = []; const gravity = 0.04 * DPR;
function burst(x, y){
const count = 60; const speed = 3 * DPR;
for(let i=0;i<count;i++){
const angle = (Math.PI * 2) * (i / count);
particles.push({
x, y, vx: Math.cos(angle) * (Math.random()*speed+0.5), vy: Math.sin(angle) * (Math.random()*speed+0.5), life: 60 + Math.random()*20, color: hsl(,85%,60%)
});
}
}
function tick(){
ctx.clearRect(0,0,W,H);
for(let i=particles.length-1;i>=0;i--){
const p = particles[i];
p.vy += gravity; p.x += p.vx; p.y += p.vy; p.life -= 1;
ctx.beginPath(); ctx.fillStyle = p.color; ctx.globalAlpha = Math.max(p.life/80, 0);
ctx.arc(p.x, p.y, 2.2*DPR, 0, Math.PI*2); ctx.fill(); ctx.globalAlpha = 1;
if (p.life <= 0) particles.splice(i,1);
}
requestAnimationFrame(tick);
}
canvas.addEventListener('click', (e)=>{
const rect = canvas.getBoundingClientRect();
burst((e.clientX-rect.left)*DPR, (e.clientY-rect.top)*DPR);
});
// 自动随机绽放
setInterval(()=>{ burst(Math.random()*W, Math.random()*H*0.7+H*0.1); }, 900);
tick();
})();
</script>
</body>
</html>
